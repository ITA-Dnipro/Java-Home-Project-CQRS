TaskStatus:
  type: string
  enum:
    - pending
    - error
    - processing
    - accepted
    - declined

TaskType:
  type: string
  enum:
    - import
    - export

TaskDataScope:
  type: string
  enum:
    - all

CreateTask:
  type: object
  discriminator:
    propertyName: type
    mapping:
      import: '#/CreateImportTask'
      export: '#/CreateExportTask'
  required:
    - type
  properties:
    type:
      $ref: '#/TaskType'

CreateImportTask:
  allOf:
    - $ref: '#/CreateTask'

CreateExportTask:
  type : object
  allOf:
    - $ref: '#/CreateTask'
  required:
    - data_scope_type
  properties:
    type:
      $ref: '#/TaskType'
    data_scope_type:
      $ref: '#/TaskDataScope'

ReadTask:
  type: object
  properties:
    id:
      type: integer
      format: int64
      example: 1
    type:
      $ref: '#/TaskType'
    status:
      $ref: '#/TaskStatus'

ReadSummary:
  type: object
  discriminator:
    propertyName: type
    mapping:
      import: '#/ReadImportSummary'
      export: '#/ReadExportSummary'
  required:
    - type
  properties:
    type:
      $ref: '#/TaskType'
    houses_amount:
      type: integer
      format: int64
      example: 2
    apartments:
      type: integer
      format: int64
      example: 56

ReadImportSummary:
  allOf:
    - $ref: '#/ReadSummary'
  properties:
    ownerships:
      type: integer
      format: int64
      example: 2

ReadExportSummary:
  allOf:
    - $ref: '#/ReadSummary'
  properties:
    invitations:
      type: integer
      format: int64
      example: 1

ReadXlsxFile:
  type: string
  format: binary
